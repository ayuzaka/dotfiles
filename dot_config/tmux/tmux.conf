# Plugins
set -g @plugin 'tmux-plugins/tpm' # TPMプラグインマネージャを読み込む
set -g @plugin 'tmux-plugins/tmux-sensible' # tmux-sensibleで基本的な推奨設定を適用する
set -g @plugin 'tmux-plugins/tmux-open' # プレフィックス+oでURL等を外部アプリに渡せるようにする
set -g @plugin 'tmux-plugins/tmux-yank' # プレフィックス+yでOSクリップボードへコピーできるようにする

run '~/.config/tmux/plugins/tpm/tpm' # TPMを初期化してプラグインをロードする

set -g prefix C-Space
unbind C-b

# キーストロークのディレイを減らす
set -sg escape-time 1 # Escape後の入力待ち時間を1msに短縮する

# ウィンドウのインデックスを1から始める
set -g base-index 1 # 画面上のウィンドウ番号表示を1始まりにする

# ペインのインデックスを1から始める
set -g pane-base-index 1 # 新規ペインの番号付けを1始まりに揃える

# 設定ファイルをリロードする
bind r source-file ~/.config/tmux/tmux.conf \; display "Reloaded!" # プレフィックス+rで設定を再読み込みする

# | でペインを縦に分割する
bind | split-window -h # プレフィックス+|で左右分割を行う

# - でペインを横に分割する
bind - split-window -v # プレフィックス+-で上下分割を行う

# vim のキーバインドでペインを移動する
bind h select-pane -L # hキーで左ペインにフォーカスを移す
bind j select-pane -D # jキーで下ペインにフォーカスを移す
bind k select-pane -U # kキーで上ペインにフォーカスを移す
bind l select-pane -R # lキーで右ペインにフォーカスを移す
bind -r C-h select-window -t :- # Ctrl+hを押し続けて前のウィンドウへ移動する
bind -r C-l select-window -t :+ # Ctrl+lを押し続けて次のウィンドウへ移動する

# vim のキーバインドでペインをリサイズする
bind -r H resize-pane -L 5 # Shift+hを押し続けて左方向へ5セルずつリサイズする
bind -r J resize-pane -D 5 # Shift+jを押し続けて下方向へ5セルずつリサイズする
bind -r K resize-pane -U 5 # Shift+kを押し続けて上方向へ5セルずつリサイズする
bind -r L resize-pane -R 5 # Shift+lを押し続けて右方向へ5セルずつリサイズする

# editprompt
bind -n M-q run-shell '\
  editprompt --resume --target-pane #{pane_id} || \
  tmux split-window -v -l 10 -c "#{pane_current_path}" \
    "editprompt --editor nvim --always-copy --target-pane #{pane_id}"'

# マウス操作を有効にする
setw -g mouse on # クリックやドラッグでペイン操作できるようにする

# 256色端末を使用する
set -g default-terminal "screen-256color" # 256色対応端末としてtmuxを起動する

set-option -g status-right "%m/%d(%a) %H:%M" # 右ステータスに日付と時刻を表示する

# https://github.com/egel/tmux-gruvbox
## COLORSCHEME: gruvbox dark (medium)
set-option -g status "on" # ステータスバー表示を有効化する

# default statusbar color
set-option -g status-style bg=colour237,fg=colour223 # ステータスバー全体をgruvboxの基調色(bg1/fg1)に設定する

# default window title colors
set-window-option -g window-status-style bg=colour214,fg=colour237 # 非アクティブウィンドウの表示を黄背景(bg=yellow, fg=bg1)にする

# default window with an activity alert
set-window-option -g window-status-activity-style bg=colour237,fg=colour248 # アクティビティのあるウィンドウをfg3色で強調する

# active window title colors
set-window-option -g window-status-current-style bg=red,fg=colour237 # アクティブウィンドウを赤背景で際立たせる

# pane border
set-option -g pane-active-border-style fg=colour250 # アクティブペイン枠をfg2色で表示する
set-option -g pane-border-style fg=colour237 # 非アクティブペイン枠をbg1色で表示する

# message infos
set-option -g message-style bg=colour239,fg=colour223 # ステータスメッセージをbg2/fg1の配色にする

# writing commands inactive
set-option -g message-command-style bg=colour239,fg=colour223 # コマンドモード時のメッセージを統一配色にする

# pane number display
set-option -g display-panes-active-colour colour250 # アクティブペイン番号表示をfg2色にする
set-option -g display-panes-colour colour237 # 非アクティブペイン番号表示をbg1色にする

# clock
set-window-option -g clock-mode-colour colour109 # clockモードの文字色を青系にする

# bell
set-window-option -g window-status-bell-style bg=colour167,fg=colour235 # ベル通知を赤背景で目立たせる

## Theme settings mixed with colors (unfortunately, but there is no cleaner way)
set-option -g status-justify "left" # ステータスバー内の各要素を左寄せで並べる
set-option -g status-left-style none # 左セグメントのスタイルを装飾なしにする
set-option -g status-left-length "80" # 左セグメントの最大表示幅を80にする
set-option -g status-right-style none # 右セグメントのスタイルを装飾なしにする
set-option -g status-right-length "80" # 右セグメントの最大表示幅を80にする
set-window-option -g window-status-separator "" # ウィンドウラベル間の区切り文字を表示しない

set-option -g status-left "#[bg=colour241,fg=colour248] #S #[bg=colour237,fg=colour241,nobold,noitalics,nounderscore]" # 左セグメントでセッション名をgruvbox配色のパワーライン風で表示する
set-option -g status-right "#[bg=colour237,fg=colour239 nobold, nounderscore, noitalics]#[bg=colour239,fg=colour246] %Y-%m-%d  %H:%M #[bg=colour239,fg=colour248,nobold,noitalics,nounderscore]#[bg=colour248,fg=colour237] #h " # 右セグメントで日付時刻とホスト名をパワーライン風に表示する

set-window-option -g window-status-current-format "#[bg=colour214,fg=colour237,nobold,noitalics,nounderscore]#[bg=colour214,fg=colour239] #I #[bg=colour214,fg=colour239,bold] #W#{?window_zoomed_flag,*Z,} #[bg=colour237,fg=colour214,nobold,noitalics,nounderscore]" # アクティブウィンドウのラベルをパワーライン配色で強調する
set-window-option -g window-status-format "#[bg=colour239,fg=colour237,noitalics]#[bg=colour239,fg=colour223] #I #[bg=colour239,fg=colour223] #W #[bg=colour237,fg=colour239,noitalics]" # 非アクティブウィンドウのラベルを落ち着いた配色で表示する

# vim: set ft=tmux tw=0 nowrap:
