version: 2
tools:
  markdown-textlint: &markdown-textlint
    lint-command: 'bunx --no-install textlint -f unix --stdin --stdin-filename "${INPUT}"'
    lint-ignore-exit-code: true
    lint-stdin: true
    lint-formats:
      - "%f:%l:%c: %m [%trror/%r]"
    root-markers:
      - .textlintrc
      - .textlintrc.json
      - .textlintrc.js

  markdown-markdownlint: &markdown-markdownlint
    lint-command: 'markdownlint -s -c "~/.config/markdownlint/markdownlint.json"'
    lint-stdin: true
    lint-formats:
      - "%f:%l %m"
      - "%f:%l:%c %m"
      - "%f: %l: %m"

  shellcheck-lint: &shellcheck-lint
    prefix: shellcheck
    lint-command: "shellcheck -f gcc -x -"
    lint-stdin: true
    lint-formats:
      - "%f:%l:%c: %t%*[^:]: %m [SC%n]"

  cspell-lint: &cspell-lint
    prefix: cspell
    lint-command: "cspell lint --config ~/.config/cspell/cspell.config.json --no-progress --no-summary --no-color ${INPUT}"
    lint-formats:
      - "%f:%l:%c - %m"
      - "%f:%l:%c %m"

  hadolint-lint: &hadolint-lint
    prefix: hadolint
    lint-command: "hadolint --no-color"
    lint-formats:
      - "%f:%l %m"

  flake8-lint: &flake8-lint
    prefix: flake8
    lint-command: 'flake8 --stdin-display-name ${INPUT} -'
    lint-stdin: true
    lint-formats:
      - '%f:%l:%c: %m'
    root-markers:
      - setup.cfg
      - pyproject.toml
      - tox.ini
      - .flake8

  mypy-lint: &mypy-lint
    prefix: mypy
    lint-command: 'mypy --show-column-numbers --strict --strict-equality'
    lint-formats:
      - '%f:%l:%c: %t%*[^:]: %m'
    root-markers:
      - setup.cfg
      - pyproject.toml
      - mypy.ini

  python-isort: &python-isort
    format-command: 'isort --quiet -'
    format-stdin: true

  python-black: &python-black
    format-command: 'black --quiet --safe -'
    format-stdin: true

languages:
  markdown:
    - <<: *markdown-textlint
    - <<: *markdown-markdownlint
  sh:
    - <<: *shellcheck-lint
  dockerfile:
    - <<: *hadolint-lint
  python:
    - <<: *flake8-lint
    - <<: *mypy-lint
    - <<: *python-isort
    - <<: *python-black
  =:
    - <<: *cspell-lint
